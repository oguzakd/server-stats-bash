#!/bin/bash

echo "----------------------------"
echo "Server Performance Stats"
echo "----------------------------"

# EN - OS and uptime info
# TR - Ä°ÅŸletim sistemi ve Ã§alÄ±ÅŸma sÃ¼resi bilgisi
echo "ğŸ–¥ï¸  OS Version:"
cat /etc/os-release | grep PRETTY_NAME | cut -d= -f2
echo

echo "â±ï¸  Uptime:"
uptime -p
echo

echo "ğŸ’¡ Load Average:"
uptime | awk -F'load average: ' '{ print $2 }'
echo

echo "ğŸ‘¥ Logged in Users:"
who | wc -l
echo

# CPU Usage
# Ä°ÅŸlemci KullanÄ±mÄ±
echo "ğŸ”¥ Total CPU Usage:"
top -bn1 | grep "Cpu(s)" | awk '{print "Used: " $2 + $4 "%, Idle: " $8 "%"}'
echo

# Memory Usage
# HafÄ±za KullanÄ±mÄ±
echo "ğŸ§  Memory Usage:"
free -m | awk 'NR==2 {
    total=$2; used=$3; free=$4;
    printf "Used: %dMB / %dMB (%.2f%%)\n", used, total, used/total * 100
}'
echo

# Disk Usage
# Disk KullanÄ±mÄ±
echo "ğŸ’½ Disk Usage (/):"
df -h / | awk 'NR==2 {
    printf "Used: %s / %s (%s used)\n", $3, $2, $5
}'
echo

# Top 5 processes by CPU
echo "ğŸ” Top 5 Processes by CPU Usage:"
ps -eo pid,comm,%cpu --sort=-%cpu | head -n 6
echo

# Top 5 processes by Memory
echo "ğŸ” Top 5 Processes by Memory Usage:"
ps -eo pid,comm,%mem --sort=-%mem | head -n 6
echo

# Failed login attempts (Stretch)
echo "âŒ Failed Login Attempts:"
lastb -n 10 | head
echo

echo "----------------------------------------"
echo "âœ… Done!"
